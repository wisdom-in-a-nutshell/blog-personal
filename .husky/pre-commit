#!/bin/sh
# Format staged files with Ultracite (recommended minimal hook)
set -e

# If nothing staged, exit fast
if [ -z "$(git diff --cached --name-only)" ]; then
  exit 0
fi

# 1) Auto-fix with Ultracite
pnpm dlx ultracite fix

# 2) Re-stage any files Ultracite modified so fixes land in the commit
git add -A

# 3) Block commit if issues remain
pnpm dlx ultracite lint
